{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///flowchart.js","webpack:///webpack/bootstrap 19d16ed368b0316cbfc8","webpack:///./src/selector/index.js","webpack:///./src/utils/index.js","webpack:///./src/flowchart.js","webpack:///./src/selector/selector.js","webpack:///./src/utils/js/clone.js","webpack:///./src/utils/js/format.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","default","selector","_selector2","_selector","obj","_interopRequireDefault","_format","_format2","_clone","_clone2","format","clone","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_utils","Flowchart","$el","$nodes","$node","$shapes","init","_this","$selector","append","size","clientWidth","clientHeight","timer","window","addEventListener","e","clearTimeout","setTimeout","width","height","attr","data","prev","_this2","map","item","index","select","$a","text","getBBox","console","log","x","version","namespaces","svg","xhtml","xlink","xml","xmlns","Selector","Array","Element","NodeList","document","querySelectorAll","undefined","__SELECTOR__","SELECTOR","callback","context","push","each","apply","el","namespace","indexOf","slice","node","createElementNS","namespaceURI","documentElement","createElement","appendChild","val","setAttributeNS","removeAttributeNS","setAttribute","removeAttribute","textNode","createTextNode","y","dx","dy","bbox","transform","getAttribute","split","translate","translateIndex","match","translateX","translateY","join","$svg","ownerSVGElement","matrix","getScreenCTM","inverse","multiply","oldPoint","POSITIVE_INFINITY","Number","NEGATIVE_INFINITY","minX","minY","maxX","maxY","point","createSVGPoint","matrixTransform","clientRect","getBoundingClientRect","left","top","event","listener","useCapture","arguments","addEventListenr","removeEventListenr","_typeof","Symbol","iterator","constructor","isArray","pIndex","id","nIndex","next"],"mappings":"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","file":"flowchart.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"flowchart\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"flowchart\"] = factory();\n\telse\n\t\troot[\"flowchart\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/*!\n * flowchart v0.0.1\n * 程刁 MIT 2017-4-13\n * https://github.com/diaocheng/flowchart#readme\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"flowchart\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"flowchart\"] = factory();\n\telse\n\t\troot[\"flowchart\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (selector) {\n  return new _selector2.default(selector);\n};\n\nvar _selector = __webpack_require__(3);\n\nvar _selector2 = _interopRequireDefault(_selector);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = exports['default'];\n// 导出选择符函数\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _format = __webpack_require__(5);\n\nvar _format2 = _interopRequireDefault(_format);\n\nvar _clone = __webpack_require__(4);\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  format: _format2.default,\n  clone: _clone2.default\n};\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _selector = __webpack_require__(0);\n\nvar _selector2 = _interopRequireDefault(_selector);\n\nvar _utils = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Flowchart = function () {\n  function Flowchart(selector) {\n    _classCallCheck(this, Flowchart);\n\n    this.$el = null;\n    this.$nodes = [];\n    this.$node = null;\n    this.$shapes = [];\n\n    this.init(selector);\n    return this;\n  }\n\n  _createClass(Flowchart, [{\n    key: 'init',\n    value: function init(selector) {\n      var _this = this;\n\n      var $selector = (0, _selector2.default)(selector);\n      this.$el = $selector.append('svg');\n      this.size($selector[0].clientWidth, $selector[0].clientHeight);\n      // 定时器\n      var timer = null;\n      window.addEventListener('resize', function (e) {\n        timer && clearTimeout(timer);\n        // 防止一直执行，造成运算量增加\n        timer = setTimeout(function () {\n          _this.size($selector[0].clientWidth, $selector[0].clientHeight);\n        }, 300);\n      });\n      return this;\n    }\n  }, {\n    key: 'size',\n    value: function size(width, height) {\n      this.$el.attr('width', width).attr('height', height);\n    }\n  }, {\n    key: 'data',\n    value: function data(_data) {\n      this.$nodes = (0, _utils.format)(_data);\n      for (var i = 0, length = this.$nodes.length; i < length; i++) {\n        if (!this.$nodes[i].prev.length) {\n          this.$node = this.$nodes[i];\n          break;\n        }\n      }\n      return this;\n    }\n  }, {\n    key: 'render',\n    value: function render(data) {\n      var _this2 = this;\n\n      // this.$shapes = this.$nodes.map((node, index) => {\n      //   const $shape = this.$el.append('g')\n      //     .attr('stroke-width', 5);\n      //   const $a = $shape.append('a')\n      //     .attr('href', function ($el, index) {\n      //       return `#${index}`;\n      //     })\n      //     .attr('name', function ($el, index) {\n      //       return index;\n      //     })\n      //     .attr('width', 60)\n      //     .attr('height', 60);\n      //   $a.append('rect')\n      //     .attr('width', 80)\n      //     .attr('height', 80)\n      //     .attr('fill', 'pink');\n      //   $a.append('text')\n      //     .attr('text-anchor', 'start')\n      //     .attr('x', 0)\n      //     .attr('y', 0)\n      //     .attr('font-size', 14)\n      //     .attr('font-family', '微软雅黑')\n      //     .attr('fill', '#000')\n      //     .text(node.text);\n      //   $shape.translate(80 * index, 80 * index);\n      //   return $shape;\n      // });\n\n      this.$shapes = this.$nodes.map(function (item, index) {\n        return _this2.$el.append('g');\n      });\n      var $shapes = this.$el.select('g').attr('transform', function ($el, index, selector) {\n        return 'translate(' + 80 * index + ',' + 80 * index + ') scale(1.1,1.1) rotate(45)';\n      });\n      var $a = $shapes.append('a').attr('href', function ($el, index) {\n        return '#' + index;\n      }).attr('width', 60).attr('height', 60);\n      $a.append('rect').attr('width', 80).attr('height', 80).attr('fill', 'pink');\n      $a.append('text').attr('text-anchor', 'start').attr('font-size', 14).attr('font-family', '微软雅黑').attr('fill', '#000').text('sdsdsds').attr('x', 0).attr('y', function ($el, index) {\n        return $el.getBBox().height;\n      });\n      console.log($shapes.x());\n      console.log($shapes.getBBox());\n      return this;\n    }\n  }]);\n\n  return Flowchart;\n}();\n\nFlowchart.version = \"0.0.1\";\nexports.default = Flowchart;\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar namespaces = {\n  svg: 'http://www.w3.org/2000/svg',\n  xhtml: 'http://www.w3.org/1999/xhtml',\n  xlink: 'http://www.w3.org/1999/xlink',\n  xml: 'http://www.w3.org/XML/1998/namespace',\n  xmlns: 'http://www.w3.org/2000/xmlns/'\n};\n\nvar Selector = function () {\n  function Selector(selector) {\n    _classCallCheck(this, Selector);\n\n    this.length = 0;\n\n    var $el = [];\n    if (selector instanceof Selector) {\n      $el = selector;\n    } else if (selector instanceof Array) {\n      $el = selector;\n    } else if (selector instanceof Element) {\n      $el = [selector];\n    } else if (selector instanceof NodeList) {\n      $el = selector;\n    } else {\n      $el = document.querySelectorAll(selector);\n    }\n    for (var i = 0, length = $el.length; i < length; i++) {\n      if ($el[i].__SELECTOR__ === undefined) {\n        // 给每一个元素编号\n        $el[i].__SELECTOR__ = Selector.SELECTOR++;\n      }\n      this[i] = $el[i];\n      this.length++;\n    }\n    return this;\n  }\n  /**\n   * 遍历对象的元素\n   * @param {Function} callback\n   * @param {*} context\n   */\n\n\n  _createClass(Selector, [{\n    key: 'each',\n    value: function each(callback, context) {\n      for (var i = 0, length = this.length; i < length; i++) {\n        callback.call(context || this[i], this[i], i, this);\n      }\n      return this;\n    }\n    /**\n     * 返回一个新的从原Selector对象Selector对象\n     * @param {Function} callback\n     * @param {*} context\n     */\n\n  }, {\n    key: 'map',\n    value: function map(callback, context) {\n      var $selector = [];\n      for (var i = 0, length = this.length; i < length; i++) {\n        var _$el = callback.call(context || this[i], this[i], i, this);\n        if (_$el) {\n          $selector.push(_$el);\n        }\n      }\n      return new Selector($selector);\n    }\n    /**\n     * 选择元素\n     * @param {String} selector\n     */\n\n  }, {\n    key: 'select',\n    value: function select(selector) {\n      var $selector = [];\n      this.each(function ($el) {\n        Array.prototype.push.apply($selector, $el.querySelectorAll(selector));\n      });\n      return new Selector($selector);\n    }\n    /**\n     * 插入元素\n     * @param {String} el\n     */\n\n  }, {\n    key: 'append',\n    value: function append(el) {\n      // 标签前缀命名空间字符串\n      var namespace = el;\n      // 命名空间与标签的分隔符':'的位置\n      var i = el.indexOf(':');\n      if (i >= 0) {\n        namespace = el.slice(0, i);\n        if (namespace !== 'xmlns') {\n          el = el.slice(i + 1);\n        }\n      }\n      // 获取命名空间\n      var $selector = this.map(function ($el) {\n        var node = void 0;\n        // 判断创建元素是否有命名空间\n        if (Selector.namespaces[namespace]) {\n          node = document.createElementNS(Selector.namespaces[namespace], el);\n        } else if ($el.namespaceURI !== Selector.namespaces['xhtml']) {\n          node = document.createElementNS($el.namespaceURI, el);\n        } else if (document.documentElement.namespaceURI !== Selector.namespaces['xhtml']) {\n          node = document.createElementNS(document.documentElement.namespaceURI, el);\n        } else {\n          node = document.createElement(el);\n        }\n        $el.appendChild(node);\n        return node;\n      });\n      return new Selector($selector);\n    }\n    /**\n     * 设置属性\n     * @param {String} name\n     * @param {String|Function} val\n     */\n\n  }, {\n    key: 'attr',\n    value: function attr(name, val) {\n      var _this = this;\n\n      var namespace = name;\n      // 命名空间与标签的分隔符':'的位置\n      var i = name.indexOf(':');\n      if (i >= 0) {\n        namespace = name.slice(0, i);\n        if (namespace !== 'xmlns') {\n          name = name.slice(i + 1);\n        }\n      }\n      this.each(function ($el, index, selector) {\n        var value = val;\n        if (typeof val === 'function') {\n          value = val.call(_this, $el, index, selector);\n        }\n        // 判断是否有命名空间\n        if (Selector.namespaces[namespace]) {\n          if (value) {\n            $el.setAttributeNS(Selector.namespaces[namespace], name, value);\n          } else {\n            $el.removeAttributeNS(Selector.namespaces[namespace], name);\n          }\n        } else {\n          if (value) {\n            $el.setAttribute(name, value);\n          } else {\n            $el.removeAttribute(name);\n          }\n        }\n      });\n      return this;\n    }\n  }, {\n    key: 'data',\n    value: function data() {}\n    /**\n     * 向节点插入文字\n     * @param {String} text\n     */\n\n  }, {\n    key: 'text',\n    value: function text(_text) {\n      this.each(function ($el) {\n        var textNode = document.createTextNode(_text);\n        $el.appendChild(textNode);\n      });\n      return this;\n    }\n  }, {\n    key: 'translate',\n    value: function translate(x, y) {\n      this.attr('transform', 'translate(' + x + ',' + y + ')');\n      return this;\n    }\n  }, {\n    key: 'translateX',\n    value: function translateX(x) {}\n  }, {\n    key: 'translateY',\n    value: function translateY(x) {}\n  }, {\n    key: 'shift',\n    value: function shift(dx, dy) {\n      this.attr('transform', function ($el, index, selector) {\n        var bbox = $el.getBBox();\n        var transform = $el.getAttribute('transform');\n        transform = transform ? transform.split(' ') : [];\n        var translate = void 0;\n        var translateIndex = 0;\n        for (var i = 0, length = transform.length; i < length; i++) {\n          if (transform[i].indexOf('translate(') !== -1) {\n            translateIndex = i;\n            translate = transform[i].match(/\\d+,\\d+/)[0].split(',');\n            break;\n          }\n        }\n\n        var translateX = translate && translate[0];\n        var translateY = translate && translate[1];\n        bbox.x = bbox.x || translateX;\n        bbox.y = bbox.x || translateY;\n        var x = bbox.x + dx;\n        var y = bbox.y + dy;\n        transform[translateIndex] = 'translate(' + x + ',' + y + ')';\n        return transform.join(' ');\n      });\n      return this;\n    }\n  }, {\n    key: 'shiftX',\n    value: function shiftX() {}\n  }, {\n    key: 'shiftY',\n    value: function shiftY() {}\n\n    // http://stackoverflow.com/questions/13046811/how-to-determine-size-of-raphael-object-after-scaling-rotating-it/13111598#13111598\n\n  }, {\n    key: 'getBBox',\n    value: function getBBox() {\n      var $el = this[0];\n\n      var bbox = $el.getBBox();\n      var $svg = $el.ownerSVGElement;\n      // 得到相对画布的坐标\n      var matrix = $el.getScreenCTM().inverse().multiply($svg.getScreenCTM());\n      // 相对于全局的坐标点\n      var oldPoint = [{ x: bbox.x, y: bbox.y }, { x: bbox.x + bbox.width, y: bbox.y }, { x: bbox.x + bbox.width, y: bbox.y + bbox.height }, { x: bbox.x, y: bbox.y + bbox.height }];\n      // 正无穷\n      var POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\n      // 负无穷\n      var NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY;\n\n      var minX = POSITIVE_INFINITY;\n      var minY = POSITIVE_INFINITY;\n      var maxX = NEGATIVE_INFINITY;\n      var maxY = NEGATIVE_INFINITY;\n\n      for (var i = 0, length = oldPoint.length; i < length; i++) {\n        var point = $svg.createSVGPoint();\n        point.x = oldPoint[i].x;\n        point.y = oldPoint[i].y;\n        // 进行矩阵变化\n        point = point.matrixTransform(matrix);\n        if (point.x < minX) {\n          minX = point.x;\n        }\n        if (point.y < minY) {\n          minY = point.y;\n        }\n        if (point.x > maxX) {\n          maxX = point.x;\n        }\n        if (point.y > maxY) {\n          maxY = point.y;\n        }\n      }\n\n      return {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY\n      };\n    }\n  }, {\n    key: 'x',\n    value: function x() {\n      var $el = this[0];\n      if ($el) {\n        var bbox = $el.getBBox();\n        var clientRect = $el.getBoundingClientRect();\n        return bbox.x || clientRect.left || 0;\n      }\n      return null;\n    }\n  }, {\n    key: 'y',\n    value: function y() {\n      var $el = this[0];\n      if ($el) {\n        var bbox = $el.getBBox();\n        var clientRect = $el.getBoundingClientRect();\n        return bbox.y || clientRect.top || 0;\n      }\n      return null;\n    }\n  }, {\n    key: 'width',\n    value: function width() {\n      return this[0].getBBox().width;\n    }\n  }, {\n    key: 'height',\n    value: function height() {\n      return this[0].getBBox().height;\n    }\n  }, {\n    key: 'on',\n    value: function on(event, listener) {\n      var useCapture = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      this.each(function ($el) {\n        $el.addEventListenr(event, listener, useCapture);\n      });\n      return this;\n    }\n  }, {\n    key: 'off',\n    value: function off(event, listener) {\n      var useCapture = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      this.each(function ($el) {\n        $el.removeEventListenr(event, listener, useCapture);\n      });\n      return this;\n    }\n  }]);\n\n  return Selector;\n}();\n\nSelector.namespaces = namespaces;\nSelector.SELECTOR = 0;\nexports.default = Selector;\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = function (object) {\n  if ((typeof object === 'undefined' ? 'undefined' : _typeof(object)) !== 'object') {\n    return object;\n  }\n  var obj = Array.isArray(object) ? [] : {};\n  for (var key in object) {\n    obj[key] = object[key];\n  }\n  return obj;\n};\n\n;\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (data) {\n  return data.map(function (node) {\n    for (var i = 0, length = data.length; i < length; i++) {\n      var pIndex = node.prev.indexOf(data[i].id);\n      if (pIndex !== -1) {\n        node.prev[pIndex] = data[i];\n      }\n      var nIndex = node.next.indexOf(data[i].id);\n      if (nIndex !== -1) {\n        node.next[nIndex] = data[i];\n      }\n    }\n    return node;\n  });\n};\n\nmodule.exports = exports[\"default\"]; // 把数据转化为开始节点对象\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// flowchart.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 19d16ed368b0316cbfc8","import Selector from './selector';\n// 导出选择符函数\nexport default function (selector) {\n  return new Selector(selector);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/selector/index.js","import format from './js/format';\nimport clone from './js/clone';\n\nexport default {\n  format,\n  clone\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","import $ from './selector';\nimport { format } from './utils';\n\nexport default class Flowchart {\n  static version = process.env.VERSION;\n  constructor(selector) {\n    this.$el = null;\n    this.$nodes = [];\n    this.$node = null;\n    this.$shapes = [];\n\n    this.init(selector);\n    return this;\n  }\n  init(selector) {\n    const $selector = $(selector);\n    this.$el = $selector.append('svg');\n    this.size($selector[0].clientWidth, $selector[0].clientHeight);\n    // 定时器\n    let timer = null;\n    window.addEventListener('resize', e => {\n      timer && clearTimeout(timer);\n      // 防止一直执行，造成运算量增加\n      timer = setTimeout(() => {\n        this.size($selector[0].clientWidth, $selector[0].clientHeight);\n      }, 300);\n    });\n    return this;\n  }\n  size(width, height) {\n    this.$el\n      .attr('width', width)\n      .attr('height', height);\n  }\n  data(data) {\n    this.$nodes = format(data);\n    for (let i = 0, length = this.$nodes.length; i < length; i++) {\n      if (!this.$nodes[i].prev.length) {\n        this.$node = this.$nodes[i];\n        break;\n      }\n    }\n    return this;\n  }\n  render(data) {\n    // this.$shapes = this.$nodes.map((node, index) => {\n    //   const $shape = this.$el.append('g')\n    //     .attr('stroke-width', 5);\n    //   const $a = $shape.append('a')\n    //     .attr('href', function ($el, index) {\n    //       return `#${index}`;\n    //     })\n    //     .attr('name', function ($el, index) {\n    //       return index;\n    //     })\n    //     .attr('width', 60)\n    //     .attr('height', 60);\n    //   $a.append('rect')\n    //     .attr('width', 80)\n    //     .attr('height', 80)\n    //     .attr('fill', 'pink');\n    //   $a.append('text')\n    //     .attr('text-anchor', 'start')\n    //     .attr('x', 0)\n    //     .attr('y', 0)\n    //     .attr('font-size', 14)\n    //     .attr('font-family', '微软雅黑')\n    //     .attr('fill', '#000')\n    //     .text(node.text);\n    //   $shape.translate(80 * index, 80 * index);\n    //   return $shape;\n    // });\n\n    this.$shapes = this.$nodes.map((item, index) => {\n      return this.$el.append('g');\n    });\n    const $shapes = this.$el.select('g').attr('transform', function ($el, index, selector) {\n      return `translate(${80 * index},${80 * index}) scale(1.1,1.1) rotate(45)`;\n    });\n    const $a = $shapes.append('a')\n      .attr('href', function ($el, index) {\n        return `#${index}`;\n      })\n      .attr('width', 60)\n      .attr('height', 60);\n    $a.append('rect')\n      .attr('width', 80)\n      .attr('height', 80)\n      .attr('fill', 'pink');\n    $a.append('text')\n      .attr('text-anchor', 'start')\n      .attr('font-size', 14)\n      .attr('font-family', '微软雅黑')\n      .attr('fill', '#000')\n      .text('sdsdsds')\n      .attr('x', 0)\n      .attr('y', function ($el, index) {\n        return $el.getBBox().height;\n      });\n    console.log($shapes.x());\n    console.log($shapes.getBBox());\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/flowchart.js","const namespaces = {\n  svg: 'http://www.w3.org/2000/svg',\n  xhtml: 'http://www.w3.org/1999/xhtml',\n  xlink: 'http://www.w3.org/1999/xlink',\n  xml: 'http://www.w3.org/XML/1998/namespace',\n  xmlns: 'http://www.w3.org/2000/xmlns/'\n};\n\nexport default class Selector {\n  static namespaces = namespaces;\n  static SELECTOR = 0;\n  constructor(selector) {\n    this.length = 0;\n\n    let $el = [];\n    if (selector instanceof Selector) {\n      $el = selector;\n    } else if (selector instanceof Array) {\n      $el = selector;\n    } else if (selector instanceof Element) {\n      $el = [selector];\n    } else if (selector instanceof NodeList) {\n      $el = selector;\n    } else {\n      $el = document.querySelectorAll(selector);\n    }\n    for (let i = 0, length = $el.length; i < length; i++) {\n      if ($el[i].__SELECTOR__ === undefined) {\n        // 给每一个元素编号\n        $el[i].__SELECTOR__ = Selector.SELECTOR++;\n      }\n      this[i] = $el[i];\n      this.length++;\n    }\n    return this;\n  }\n  /**\n   * 遍历对象的元素\n   * @param {Function} callback\n   * @param {*} context\n   */\n  each(callback, context) {\n    for (let i = 0, length = this.length; i < length; i++) {\n      callback.call(context || this[i], this[i], i, this);\n    }\n    return this;\n  }\n  /**\n   * 返回一个新的从原Selector对象Selector对象\n   * @param {Function} callback\n   * @param {*} context\n   */\n  map(callback, context) {\n    const $selector = [];\n    for (let i = 0, length = this.length; i < length; i++) {\n      const $el = callback.call(context || this[i], this[i], i, this);\n      if ($el) {\n        $selector.push($el);\n      }\n    }\n    return new Selector($selector);\n  }\n  /**\n   * 选择元素\n   * @param {String} selector\n   */\n  select(selector) {\n    const $selector = [];\n    this.each($el => {\n      Array.prototype.push.apply($selector, $el.querySelectorAll(selector));\n    });\n    return new Selector($selector);\n  }\n  /**\n   * 插入元素\n   * @param {String} el\n   */\n  append(el) {\n    // 标签前缀命名空间字符串\n    let namespace = el;\n    // 命名空间与标签的分隔符':'的位置\n    const i = el.indexOf(':');\n    if (i >= 0) {\n      namespace = el.slice(0, i);\n      if (namespace !== 'xmlns') {\n        el = el.slice(i + 1);\n      }\n    }\n    // 获取命名空间\n    const $selector = this.map($el => {\n      let node;\n      // 判断创建元素是否有命名空间\n      if (Selector.namespaces[namespace]) {\n        node = document.createElementNS(Selector.namespaces[namespace], el);\n      } else if ($el.namespaceURI !== Selector.namespaces['xhtml']) {\n        node = document.createElementNS($el.namespaceURI, el);\n      } else if (document.documentElement.namespaceURI !== Selector.namespaces['xhtml']) {\n        node = document.createElementNS(document.documentElement.namespaceURI, el);\n      } else {\n        node = document.createElement(el);\n      }\n      $el.appendChild(node);\n      return node;\n    });\n    return new Selector($selector);\n  }\n  /**\n   * 设置属性\n   * @param {String} name\n   * @param {String|Function} val\n   */\n  attr(name, val) {\n    let namespace = name;\n    // 命名空间与标签的分隔符':'的位置\n    const i = name.indexOf(':');\n    if (i >= 0) {\n      namespace = name.slice(0, i);\n      if (namespace !== 'xmlns') {\n        name = name.slice(i + 1);\n      }\n    }\n    this.each(($el, index, selector) => {\n      let value = val;\n      if (typeof val === 'function') {\n        value = val.call(this, $el, index, selector);\n      }\n      // 判断是否有命名空间\n      if (Selector.namespaces[namespace]) {\n        if (value) {\n          $el.setAttributeNS(Selector.namespaces[namespace], name, value);\n        } else {\n          $el.removeAttributeNS(Selector.namespaces[namespace], name);\n        }\n      } else {\n        if (value) {\n          $el.setAttribute(name, value);\n        } else {\n          $el.removeAttribute(name);\n        }\n      }\n    });\n    return this;\n  }\n  data() {\n\n  }\n  /**\n   * 向节点插入文字\n   * @param {String} text\n   */\n  text(text) {\n    this.each($el => {\n      const textNode = document.createTextNode(text);\n      $el.appendChild(textNode);\n    });\n    return this;\n  }\n  translate(x, y) {\n    this.attr('transform', `translate(${x},${y})`);\n    return this;\n  }\n  translateX(x) {\n\n  }\n  translateY(x) {\n\n  }\n  shift(dx, dy) {\n    this.attr('transform', ($el, index, selector) => {\n      const bbox = $el.getBBox();\n      let transform = $el.getAttribute('transform');\n      transform = transform ? transform.split(' ') : [];\n      let translate;\n      let translateIndex = 0;\n      for (let i = 0, length = transform.length; i < length; i++) {\n        if (transform[i].indexOf('translate(') !== -1) {\n          translateIndex = i;\n          translate = transform[i].match(/\\d+,\\d+/)[0].split(',');\n          break;\n        }\n      }\n\n      const translateX = translate && translate[0];\n      const translateY = translate && translate[1];\n      bbox.x = bbox.x || translateX;\n      bbox.y = bbox.x || translateY;\n      const x = bbox.x + dx;\n      const y = bbox.y + dy;\n      transform[translateIndex] = `translate(${x},${y})`;\n      return transform.join(' ');\n    });\n    return this;\n  }\n  shiftX() {\n\n  }\n  shiftY() {\n\n  }\n\n  // http://stackoverflow.com/questions/13046811/how-to-determine-size-of-raphael-object-after-scaling-rotating-it/13111598#13111598\n  getBBox() {\n    const $el = this[0];\n\n    let bbox = $el.getBBox();\n    let $svg = $el.ownerSVGElement;\n    // 得到相对画布的坐标\n    const matrix = $el.getScreenCTM().inverse().multiply($svg.getScreenCTM());\n    // 相对于全局的坐标点\n    const oldPoint = [\n      { x: bbox.x, y: bbox.y },\n      { x: bbox.x + bbox.width, y: bbox.y },\n      { x: bbox.x + bbox.width, y: bbox.y + bbox.height },\n      { x: bbox.x, y: bbox.y + bbox.height }\n    ];\n    // 正无穷\n    const POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\n    // 负无穷\n    const NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY;\n\n    let minX = POSITIVE_INFINITY;\n    let minY = POSITIVE_INFINITY;\n    let maxX = NEGATIVE_INFINITY;\n    let maxY = NEGATIVE_INFINITY;\n\n    for (let i = 0, length = oldPoint.length; i < length; i++) {\n      let point = $svg.createSVGPoint();\n      point.x = oldPoint[i].x;\n      point.y = oldPoint[i].y;\n      // 进行矩阵变化\n      point = point.matrixTransform(matrix);\n      if (point.x < minX) {\n        minX = point.x;\n      }\n      if (point.y < minY) {\n        minY = point.y;\n      }\n      if (point.x > maxX) {\n        maxX = point.x;\n      }\n      if (point.y > maxY) {\n        maxY = point.y;\n      }\n    }\n\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  }\n  x() {\n    const $el = this[0];\n    if ($el) {\n      const bbox = $el.getBBox();\n      const clientRect = $el.getBoundingClientRect();\n      return bbox.x || clientRect.left || 0;\n    }\n    return null;\n  }\n  y() {\n    const $el = this[0];\n    if ($el) {\n      const bbox = $el.getBBox();\n      const clientRect = $el.getBoundingClientRect();\n      return bbox.y || clientRect.top || 0;\n    }\n    return null;\n  }\n  width() {\n    return this[0].getBBox().width;\n  }\n  height() {\n    return this[0].getBBox().height;\n  }\n  on(event, listener, useCapture = false) {\n    this.each($el => {\n      $el.addEventListenr(event, listener, useCapture);\n    });\n    return this;\n  }\n  off(event, listener, useCapture = false) {\n    this.each($el => {\n      $el.removeEventListenr(event, listener, useCapture);\n    });\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/selector/selector.js","export default function (object) {\n  if (typeof object !== 'object') {\n    return object;\n  }\n  const obj = Array.isArray(object) ? [] : {};\n  for (let key in object) {\n    obj[key] = object[key];\n  }\n  return obj;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/js/clone.js","// 把数据转化为开始节点对象\nexport default function (data) {\n  return data.map(node => {\n    for (let i = 0, length = data.length; i < length; i++) {\n      const pIndex = node.prev.indexOf(data[i].id);\n      if (pIndex !== -1) {\n        node.prev[pIndex] = data[i];\n      }\n      const nIndex = node.next.indexOf(data[i].id);\n      if (nIndex !== -1) {\n        node.next[nIndex] = data[i];\n      }\n    }\n    return node;\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/js/format.js"],"sourceRoot":""}